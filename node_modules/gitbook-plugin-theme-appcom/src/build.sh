#! /bin/bash

# Cleanup folder
rm -rf _assets

# Recreate folder
mkdir -p _assets/website/
mkdir -p _assets/ebook/

# Compile JS
browserify src/js/core/index.js | uglifyjs -mc > _assets/website/gitbook.js
browserify src/js/theme/index.js | uglifyjs -mc > _assets/website/theme.js

# Compile Website CSS
scss src/scss/website.scss:_assets/website/style.css

# Compile eBook CSS
scss src/scss/ebook.scss:_assets/ebook/ebook.css
scss src/scss/pdf.scss:_assets/ebook/pdf.css
scss src/scss/mobi.scss:_assets/ebook/mobi.css
scss src/scss/epub.scss:_assets/ebook/epub.css

# Copy fonts
mkdir -p _assets/website/fonts
cp -R node_modules/font-awesome/fonts/ _assets/website/fonts/fontawesome/

# Copy icons
mkdir -p _assets/website/images
cp src/assets/img/logo.svg _assets/website/images/logo.svg
cp src/assets/img/favicon.png _assets/website/images/favicon.png